<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resim Gönderme</title>
    <style>
        img {
            width: 100px;
            height: auto;
            margin: 10px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        img.selected {
            border-color: blue; /* Seçilen resim için mavi çerçeve */
        }
    </style>
</head>
<body>
    <h1>Bir Resim Seçin ve Gönderin</h1>

    <div id="image-container">
        <img src="../uploads/image_1.jpg" alt="Resim 1" onclick="selectImage(this)">
    </div>

    <input type="file" id="file-input" accept="image/*" onchange="handleFileSelect(event)" style="display:none;">
    <button id="send-button" style="display: none;" onclick="sendImage()">Gönder</button>

    <script>
        let selectedImage = null;
        let selectedFile = null;

        function selectImage(image) {
            // Tıklanan resmi seç
            if (selectedImage) {
                selectedImage.classList.remove('selected');
            }

            selectedImage = image;
            selectedImage.classList.add('selected');

            // Dosya input'unu göster ve seçilen dosyayı ayarla
            document.getElementById('file-input').click();
        }

        function handleFileSelect(event) {
            selectedFile = event.target.files[0];

            // Gönder butonunu göster
            document.getElementById('send-button').style.display = 'block';
        }

        function sendImage() {
            if (!selectedFile) {
                alert('Lütfen bir resim seçin.');
                return;
            }

            const formData = new FormData();
            formData.append('file', selectedFile);

            fetch('http://192.168.73.25:5000/upload-image', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Ağ yanıtı uygun değil.');
                }
                return response.json();
            })
            .then(data => {
                alert('Tahmin Sonucu: ' + data.predicted_class);
            })
            .catch(error => {
                console.error('Hata:', error);
            });
        }
    </script>
</body>
</html>
